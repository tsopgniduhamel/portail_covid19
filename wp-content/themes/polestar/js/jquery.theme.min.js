jQuery(function(e){function o(){var o=e(window).scrollTop(),t="no";e(".panel-row-style").each(function(){var n="#"+e(this).attr("id"),i=e(this).offset().top-1,a=e(this).outerHeight(),s=i-headerHeight(),r=i+a-headerHeight();return o>=s&&o<=r?(t="yes",e("#site-navigation .current").removeClass("current"),e('#site-navigation a[href$="'+n+'"]').parent("li").addClass("current"),!1):void("no"===t&&e("#site-navigation .current").removeClass("current"))})}e.fn.polestarIsVisible=function(){var e=this[0].getBoundingClientRect();return e.bottom>=0&&e.right>=0&&e.top<=(window.innerHeight||document.documentElement.clientHeight)&&e.left<=(window.innerWidth||document.documentElement.clientWidth)},e(window).load(function(){e(".entry-thumbnail").each(function(){img=e(this).find("img"),img_width=img.width(),img_height=img.height(),e(this).css({maxWidth:img_width,maxHeight:img_height})})}),"undefined"!=typeof e.fn.fitVids&&e(".entry-content, .entry-content .panel, .entry-video, .woocommerce #main").fitVids({ignore:".tableauViz"}),e(document).ready(function(){e(".flexslider").each(function(){e(this).flexslider({animation:"slide",controlNav:!1,customDirectionNav:e(this).find(".flex-direction-nav a"),start:function(){e(".flexslider .slides img").show()}})})});var t=function(){var o=window.pageYOffset||document.documentElement.scrollTop;o>e("#masthead").outerHeight()?e("#scroll-to-top").hasClass("show")||e("#scroll-to-top").css("pointer-events","auto").addClass("show"):e("#scroll-to-top").hasClass("show")&&e("#scroll-to-top").css("pointer-events","none").removeClass("show")};t(),e(window).scroll(t),e("#scroll-to-top").click(function(){e("html, body").animate({scrollTop:0})});var n=e("#header-search");e("#masthead .search-icon").click(function(){n.fadeIn("fast"),n.find("form").css("margin-top",-n.find("form").innerHeight()/2),n.find('input[type="search"]').focus().select(),n.find("#close-search").addClass("animate-in")}),n.find("#close-search").click(function(){n.fadeOut(350),e(this).removeClass("animate-in")}),e(window).scroll(function(){n.is(":visible")&&n.find("form").css("margin-top",-n.find("form").outerHeight()/2)}),e("#header-search input[type=search]").on("focusout",function(o){e("body").hasClass("disable-search-close")||e("#close-search.animate-in").trigger("click")}),e(document).keyup(function(o){27===o.keyCode&&e("#close-search.animate-in").trigger("click")}),e(window).load(function(){e("body.no-js").removeClass("no-js"),e("body").hasClass("css3-animations")&&(e(".menu-item").children("a").focus(function(){e(this).parents("ul, li").addClass("focus")}),e(".menu-item").children("a").click(function(){e(this).parents("ul, li").removeClass("focus")}),e(".menu-item").children("a").focusout(function(){e(this).parents("ul, li").removeClass("focus")}))}),e(document).ready(function(e){window.location.hash||(e('#site-navigation a[href="'+window.location.href+'"]').parent("li").addClass("current-menu-item"),e(window).scroll(function(){e("#site-navigation ul li").hasClass("current")?(e("#site-navigation li").removeClass("current-menu-item"),e("#site-navigation li.current-menu-ancestor").removeClass("current-menu-ancestor current-menu-parent")):0==e(document).scrollTop()&&(e('#site-navigation a[href="'+window.location.href+'"]').parent("li").addClass("current-menu-item"),e('#site-navigation a[href="'+window.location.href+'"]').parents("li.menu-item-has-children").addClass("current-menu-ancestor current-menu-parent"))}))}),("ontouchstart"in document.documentElement||window.navigator.msMaxTouchPoints||window.navigator.MaxTouchPoints)&&(/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream&&(e("body").css("cursor","pointer"),e("body").addClass("ios")),e(".main-navigation #primary-menu").find(".menu-item-has-children > a").each(function(){e(this).on("click touchend",function(o){var t=e(this);o.stopPropagation(),"click"!=o.type&&(t.parent().hasClass("hover")||(e(".menu-item.hover").removeClass("hover"),t.parents(".menu-item").addClass("hover"),o.preventDefault()),e(document).one("click",function(){t.parent().removeClass("hover")}))})})),headerHeight=function(){var o,t=e("#wpadminbar").outerHeight(),n=e("body").hasClass("admin-bar"),i=e("header").hasClass("sticky");return o=i&&n&&e(window).width()>600?t+e("header").outerHeight()-1:i?e("header").outerHeight()-1:0},e.fn.polestarSmoothScroll=function(){e("body").hasClass("disable-smooth-scroll")||e(this).click(function(o){var t=this.hash,n=t.substring(1),i=this;if(e(".panel-grid [id*="+n+"]").length>0?(e("#site-navigation .current").removeClass("current"),e(i).parent("li").addClass("current")):e("#site-navigation .current").removeClass("current"),location.pathname.replace(/^\//,"")==this.pathname.replace(/^\//,"")&&location.hostname==this.hostname){var a=e(this.hash);if(a=a.length?a:e("[name="+this.hash.slice(1)+"]"),a.length)return e("html, body").animate({scrollTop:a.offset().top-headerHeight()},{duration:1200,start:function(){e("html, body").on("wheel touchmove",function(){e("html, body").stop().off("wheel touchmove")})},complete:function(){e("html, body").finish().off("wheel touchmove")}}),!1}})},e(window).load(function(){e('#site-navigation a[href*="#"]:not([href="#"]), .comments-link a[href*="#"]:not([href="#"]), .puro-scroll[href*="#"]:not([href="#"])').polestarSmoothScroll()}),e(window).load(function(){if(location.pathname.replace(/^\//,"")==window.location.pathname.replace(/^\//,"")&&location.hostname==window.location.hostname){var o=e(window.location.hash);if(o.length)return e("html, body").animate({scrollTop:o.offset().top-headerHeight()},0),!1}}),e(window).on("scroll",o);var i=!1;e("#mobile-menu-button").click(function(o){o.preventDefault();var t=e(this);if(t.toggleClass("to-close"),i===!1){i=e("<div></div>").append(e(".main-navigation ul").first().clone()).attr("id","mobile-navigation").appendTo("#masthead").hide(),e("#header-search form").length&&i.append(e("#header-search form").clone()),e(".main-navigation .shopping-cart").length&&i.append(e(".main-navigation .shopping-cart .shopping-cart-link").clone()),i.find("#primary-menu").show().css("opacity",1),i.find(".menu-item-has-children > a").addClass("has-dropdown"),i.find(".page_item_has_children > a").addClass("has-dropdown"),i.find(".has-dropdown").after('<button class="dropdown-toggle" aria-expanded="false"><i class="icon-chevron-down" aria-hidden="true"></i></button>'),i.find(".dropdown-toggle").click(function(o){o.preventDefault(),e(this).toggleClass("toggle-open").next(".children, .sub-menu").slideToggle("fast")}),i.find(".has-dropdown").click(function(o){"undefined"!=typeof e(this).attr("href")&&"#"!=e(this).attr("href")||(o.preventDefault(),e(this).siblings(".dropdown-toggle").trigger("click"))});var n=function(){if(e("#masthead").hasClass("sticky")){var o="fixed"===e("#wpadminbar").css("position")?e("#wpadminbar").outerHeight():0,t=e("#masthead").innerHeight(),n=e(window).height()-t-o;e("#mobile-navigation").css("max-height",n)}};n(),e(window).resize(n),e("#mobile-navigation").scroll(n)}i.slideToggle("fast"),e("#mobile-navigation a").click(function(o){(!e(this).hasClass("has-dropdown")||"undefined"!=typeof e(this).attr("href")&&"#"!==e(this).attr("href"))&&i.is(" :visible")&&i.slideUp("fast"),t.removeClass("to-close")}),e('#mobile-navigation a[href*="#"]:not([href="#"])').polestarSmoothScroll()})}),function(e){e(window).load(function(){polestar.logoScale=parseFloat(polestar.logoScale);var o=e("#masthead"),t={top:parseInt(o.css("padding-top")),bottom:parseInt(o.css("padding-bottom"))};if(o.data("scale-logo")){var n=o.find(".site-branding img"),i=n.width(),a=n.height(),s=i*polestar.logoScale;scaledHeight=a*polestar.logoScale,e(".site-branding img").wrap("<div class='custom-logo-wrapper'></div>");var r=function(){var i=o.find(".site-branding > *"),a=window.pageYOffset||document.documentElement.scrollTop;if(a>0?o.css({"padding-top":t.top*polestar.logoScale,"padding-bottom":t.bottom*polestar.logoScale}):o.css({"padding-top":t.top,"padding-bottom":t.bottom}),n.length)if(a>0){var r=polestar.logoScale+Math.max(0,48-a)/48*(1-polestar.logoScale);n.height()==scaledHeight&&n.width()==s&&r==polestar.logoScale||e(".site-branding img").css({width:100*r+"%"})}else e(".site-branding img").css({width:""});else a>0?i.css("transform","scale("+polestar.logoScale+")"):i.css("transform","scale(1)")};r(),e(window).scroll(r).resize(r)}if(e("#masthead").hasClass("sticky")){var o=e("#masthead"),l=e('<div class="masthead-sentinel"></div>').insertAfter(o),c=e("#topbar"),d=e('#topbar .woocommerce-store-notice[style*="display: none"]'),h=function(){e("body").hasClass("mobile-header-ns")&&e(window).width()<polestar.collapse||(l!==!1&&l.css("height",o.outerHeight()),e("body").hasClass("no-topbar")||c.polestarIsVisible()||e("body").addClass("topbar-out"),c.length&&e("body").hasClass("topbar-out")&&c.polestarIsVisible()&&e("body").removeClass("topbar-out"),e("body").hasClass("no-topbar")&&!e(window).scrollTop()&&e("body").addClass("topbar-out"),e("body").hasClass("no-topbar")||!e("body").hasClass("no-topbar")&&e("body").hasClass("topbar-out")||d.length?o.css("position","fixed"):e("body").hasClass("no-topbar")||e("body").hasClass("topbar-out")||o.css("position","absolute"))};h(),e(window).resize(h).scroll(h);var m=function(){e(window).scrollTop()>0?e(o).addClass("stuck"):e(o).removeClass("stuck")};m(),e(window).scroll(m)}})}(jQuery);